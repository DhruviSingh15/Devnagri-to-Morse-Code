<!DOCTYPE html>
<html lang="en">
<!-- Previous head and style sections remain the same -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Devanagari to Morse Code Converter</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* All previous styles remain the same */
        .video-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
            background: #000;
        }

        .video-background {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            object-fit: cover;
            opacity: 0.6;
            transition: opacity 0.3s ease;
        }

        .video-fallback {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #1a1a1a, #2a2a2a);
        }

        .content-overlay {
            position: relative;
            z-index: 1;
            background-color: rgba(0, 0, 0, 0.4);
            min-height: 100vh;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .loading {
            animation: pulse 1.5s infinite;
        }

        .glass-morphism {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body class="min-h-screen font-sans">
    <!-- All previous HTML structure remains the same until the script section -->
    
    <!-- Video Container -->
    <div class="video-container">
        <div class="video-fallback"></div>
        <video 
            id="bgVideo"
            class="video-background" 
            autoplay 
            loop 
            muted 
            playsinline
            poster="/assets/videos/background.mp4"
        >
            <source src="D:\College\Python\dev to morse\public\assets\videos\background.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
    </div>

    <!-- Content Overlay -->
    <div class="content-overlay">
        <!-- Header -->
        <header class="relative bg-gradient-to-r from-green-500/80 to-teal-600/80 text-white p-4 backdrop-blur-sm">
            <h1 class="text-3xl text-center font-bold">Devanagari to Morse Code Converter</h1>
        </header>

        <!-- Main Content -->
        <main class="flex-grow flex items-center justify-center p-6 relative">
            <section class="w-full max-w-xl glass-morphism p-8 rounded-lg shadow-xl">
                <!-- Previous form content remains the same -->
                <h2 class="text-2xl font-bold mb-4 text-center text-gray-800">Convert Devanagari to Morse Code</h2>
                <form id="converter-form" class="space-y-4" onsubmit="event.preventDefault();">
                    <div>
                        <label for="devanagari-input" class="block text-gray-700 font-semibold mb-2">
                            Enter Devanagari Text:
                            <span class="text-sm font-normal text-gray-500" id="char-counter">(0/500 characters)</span>
                        </label>
                        <textarea 
                            id="devanagari-input" 
                            rows="4" 
                            maxlength="500"
                            class="w-full p-2 border rounded bg-white/90" 
                            placeholder="Type Devanagari text here..."
                        ></textarea>
                    </div>
                    <div>
                        <label for="morse-output" class="block text-gray-700 font-semibold mb-2">Morse Code:</label>
                        <div class="relative">
                            <textarea 
                                id="morse-output" 
                                rows="4" 
                                class="w-full p-2 border rounded bg-white/80" 
                                readonly
                            ></textarea>
                            <button 
                                onclick="copyToClipboard()"
                                class="absolute top-2 right-2 bg-gray-200 p-2 rounded hover:bg-gray-300 transition-colors"
                                aria-label="Copy to clipboard"
                            >
                                ðŸ“‹ Copy
                            </button>
                        </div>
                    </div>
                    <div class="flex justify-center space-x-4">
                        <button 
                            type="button" 
                            id="convert-btn"
                            class="bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600 transition-colors disabled:opacity-50" 
                            onclick="convertToMorse()"
                        >
                            Convert
                        </button>
                        <button 
                            type="button" 
                            class="bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600 transition-colors"
                            onclick="clearFields()"
                        >
                            Clear
                        </button>
                        <button 
                            type="button" 
                            id="play-btn"
                            class="bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600 transition-colors disabled:opacity-50"
                            onclick="playMorseCode()"
                            disabled
                        >
                            ðŸ”Š Play
                        </button>
                    </div>
                    <div id="error-message" class="text-red-500 text-center hidden"></div>
                </form>
            </section>
        </main>

        <!-- Footer -->
        <footer class="relative bg-gradient-to-r from-teal-500/80 to-green-600/80 text-white p-4 text-center backdrop-blur-sm">
            <p>&copy; 2025 Devanagari to Morse Code Converter</p>
        </footer>
    </div>

    <script>
        // Previous event listeners and functions remain the same
        document.getElementById('bgVideo').addEventListener('loadeddata', function() {
            this.style.opacity = '0.6';
        });

        document.getElementById('bgVideo').addEventListener('error', function() {
            this.style.display = 'none';
        });

        const devanagariInput = document.getElementById('devanagari-input');
        const charCounter = document.getElementById('char-counter');
        
        devanagariInput.addEventListener('input', function() {
            const length = this.value.length;
            charCounter.textContent = `(${length}/500 characters)`;
        });

        async function copyToClipboard() {
            const morseOutput = document.getElementById('morse-output');
            try {
                await navigator.clipboard.writeText(morseOutput.value);
                const button = event.target;
                const originalText = button.textContent;
                button.textContent = 'âœ“ Copied!';
                setTimeout(() => button.textContent = originalText, 2000);
            } catch (err) {
                console.error('Failed to copy text: ', err);
            }
        }

        function clearFields() {
            document.getElementById('devanagari-input').value = '';
            document.getElementById('morse-output').value = '';
            document.getElementById('error-message').classList.add('hidden');
            document.getElementById('play-btn').disabled = true;
            charCounter.textContent = '(0/500 characters)';
        }

        async function convertToMorse() {
            const devanagariInput = document.getElementById('devanagari-input');
            const morseOutput = document.getElementById('morse-output');
            const convertBtn = document.getElementById('convert-btn');
            const errorMessage = document.getElementById('error-message');
            const playBtn = document.getElementById('play-btn');
            
            if (!devanagariInput.value.trim()) {
                errorMessage.textContent = 'Please enter some text to convert';
                errorMessage.classList.remove('hidden');
                return;
            }

            try {
                setLoading(true);
                errorMessage.classList.add('hidden');
                
                const response = await fetch('/convert', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ text: devanagariInput.value })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                morseOutput.value = data.morse_code;
                playBtn.disabled = false;
            } catch (error) {
                errorMessage.textContent = 'Network error. Please try again.';
                errorMessage.classList.remove('hidden');
                console.error('Conversion error:', error);
            } finally {
                setLoading(false);
            }
        }

        function setLoading(isLoading) {
            const convertBtn = document.getElementById('convert-btn');
            convertBtn.disabled = isLoading;
            convertBtn.classList.toggle('loading', isLoading);
            convertBtn.textContent = isLoading ? 'Converting...' : 'Convert';
        }

        // Updated audio functions with different sounds for dots and dashes
        function playMorseCode() {
            const morseCode = document.getElementById('morse-output').value;
            const context = new (window.AudioContext || window.webkitAudioContext)();
            const ditLength = 100;
            
            let startTime = context.currentTime;
            
            morseCode.split('').forEach(char => {
                if (char === '.') {
                    playDot(context, startTime);
                    startTime += ditLength * 2 / 1000;
                } else if (char === '-') {
                    playDash(context, startTime);
                    startTime += ditLength * 4 / 1000;
                } else if (char === ' ') {
                    startTime += ditLength * 3 / 1000;
                }
            });
        }

        function playDot(context, startTime) {
            const oscillator = context.createOscillator();
            const gainNode = context.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(context.destination);
            
            // Higher frequency for dots
            oscillator.frequency.value = 800;
            gainNode.gain.setValueAtTime(0.5, startTime);
            
            // Shorter duration for dots
            oscillator.start(startTime);
            oscillator.stop(startTime + 0.1);
        }

        function playDash(context, startTime) {
            const oscillator = context.createOscillator();
            const gainNode = context.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(context.destination);
            
            // Lower frequency for dashes
            oscillator.frequency.value = 600;
            gainNode.gain.setValueAtTime(0.5, startTime);
            
            // Longer duration for dashes
            oscillator.start(startTime);
            oscillator.stop(startTime + 0.3);
        }
    </script>
</body>
</html>
